* MaxSite CMS
* (c) http://max-3000.com/

Инструкция по переносу старых шаблонов на новую версию MaxSite CMS.

Цель переделки шаблона — сделать его автономным, на зависящим от изменений MaxSite CMS.

Обязательно сохраните текущую версию MaxSite CMS на компе. Она может понадобиться для загрузки недостающих файлов.


============

После обновления MaxSite CMS, старый шаблон может выдавать разные ошибки вида:

	----------------------------------------------
	A PHP Error was encountered

	Severity: Warning

	Message: require_once(/shared/functions/template.php) [function.require-once]: 
	failed to open stream: No such file or directory

	Filename: my_template/functions.php

	Line Number: 18
	----------------------------------------------

Пугаться не нужно, достаточно научиться читать такие сообщения. Они являются подсказкой, что и как следует исправить.

Например, ошибка «No such file or directory», говорит, что файл не найден по адресу «/shared/functions/template.php» и ошибка произошла в файле «my_template/functions.php» в строке 18.

Открываем файл «my_template/functions.php» и в 18 строке видим код:

	require_once(getinfo('shared_dir') . 'functions/template.php');

Это подключение файла из каталога «shared». Через файловый менеджер (например Total Commander) проверим, что каталога «shared/functions/» теперь не существует. Из-за этого ошибка и возникает. Значит нужно из старой версии MaxSite CMS (та которая у вас стояла) взять недостающие файлы.

	- Находим файл в старой версии в /shared/functions/template.php
	- копируем файл в каталог своего шаблона «custom»
	- в my_template/functions.php в 18 строчке меняем код
		
		было: require_once(getinfo('shared_dir') . 'functions/template.php');
		
		стало:  require_once(getinfo('template_dir') . 'custom/template.php');
	
Аналогично проделываем такие же операции с другими недостающими файлам (которые высвечиваются как php-ошибки).

========

Если вы использовали компилятор less, то на первом этапе его следует отключить. Проверьте в каталоге «css» наличие файлов var_style.php и style.php. Если они есть, то переименуйте их в «-var_style.php» и «-style.php».

Обновите страницу сайта, должны исчезнуть сообщения об ошибках less-компилятора.

Дизайн сайта, скорее всего «развалится». Это зависит от того, используется ли в шаблоне файл «css/style_all_mini.css». Если его нет, то скопируйте из старой версии MaxSite CMS «shared/css-lessstyle-all-mini.css» в свой шаблон в каталог «css». 

После этих операций шаблон сайта должен нормально работать.

=========

Если вы использовали LESS в своей работе, то вы можете егог и дальше использовать, только выполнять компиляцию не через var_style.php и/или style.php, а с помощью плагина less_compiling. Активируйте его и следуйте инструкции.

Также вы можете использовать любой сторонний less-компилятор, например WinLess. См. http://unicss.maxsite.com.ua/compiling

Обратите внимание, что less-компилятор MaxSite CMS поддерживал собственные инструкции вида «@MSO_IMPORT_ALL_XXX;» и «@MSO_IMPORT_ALL(XXX);». Эти команды не работают в оригинальном less, поэтому их следует заменить на стандартные «@import url(файл.less);».

=========

Если вы использовали какие-то файлы из shared-каталога, например shared/css-less/fonts/font-awesome/ то в новой версии они могут быть недоступны. Следует перенести их из старой версии MaxSite CMS в каталог своего шаблона и поменять в css-стилях пути.

=========

Если вы использовали подключения файлов jQuery из каталога common/jquery, то проверьте, чтобы они были доступны и сейчас. Если js-файла нет, то скопируйте его из старой версии MaxSite CMS в каталог своего шаблона.

=========


