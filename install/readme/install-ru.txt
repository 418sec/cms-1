(с) MaxSite CMS, 2008-2015
----------------------------------------------------------------------------------------------------

Полезные ссылки:

	* Официальный сайт: http://max-3000.com/
	* Автор: http://maxsite.org/, http://maxsite.com.ua/
	* Анонсы системы: https://twitter.com/maxsite
	
	* Последний релиз: https://github.com/maxsite/cms
	* Будущая dev-версия: https://github.com/maxsite/cms/tree/dev						
	
	* Книга по MaxSite CMS: http://book.max-3000.com/
	* ЧАВО для новичков: http://max-3000.com/page/faq
	* Центр помощи: http://max-3000.com/help
	* Форум поддержки: http://forum.max-3000.com/
	
	* Каталог шаблонов: http://forum.max-3000.com/viewforum.php?f=13
	* Каталог плагинов: http://forum.max-3000.com/viewforum.php?f=17


ТРЕБОВАНИЯ СИСТЕМЫ
----------------------------------------------------------------------------------------------------
1. Возможность работы с .htaccess и включенный mod_rewrite.
2. MySQL > 4.1. Работа в UTF8. Тип базы MyISAM.
3. PHP > 5.3. (Для PHP 5.5 см. ниже)


АВТОМАТИЧЕСКАЯ УСТАНОВКА MaxSite CMS 
----------------------------------------------------------------------------------------------------

0. Загрузите все файлы на сервер.

1. Неберите в браузере «http://ваш сайт/install» и следуйте инструкциям. 

2. После установки, каталог «install» можно удалить.


РУЧНАЯ УСТАНОВКА MaxSite CMS 
----------------------------------------------------------------------------------------------------

Перед началом установки следует задать в конфигурационных файлах параметры доступа к БД. 
После этого система сама выполнит инсталяцию. 

Презентация по установке: http://max-3000.com/page/kak-ustanovit-maxsite-cms

	|  Поскольку все файлы используют кодировку UTF8 без сигнатуры (BOM), то вносить изменения 
	|  лучше не в Блокноте, который глючит в этом режиме, а с помощью нормальных программ, 
	|  например Notepad2: http://www.flos-freeware.ch/


0. Загрузите все файлы на сервер, кроме каталога «install».


1.  Скопируйте файл «install/distr/.htaccess» в корень сайта (там где index.php).

	Если вы располагаете сайт не в корне домена, а в его подкаталоге, например
	«http://www.your-site.com/blog/», то откройте в notepad2 файл «.htaccess-subdir» и замените 
	в нем все «#subdir#» на имя вашего подкаталога (в нашем случае - «blog» - без кавычек!). 
	сохраните файл с именем «.htaccess» в корень сайта.     

2.  Скопируйте файл «install/distr/robots.txt» в корень сайта. В параметре 
    Host укажите адрес главного зеркала сайта:
    
        Host: site.com 

	Этот файл используется поисковыми системами при индексации вашего сайта. Учитывайте, что 
    адреса с www и без для поисковиков разные.


3.  Скопируйте файл «install/distr/sitemap.xml» в корень сайта.

	Этот файл содержит XML-карту сайта, которая используется поисковиками для лучшей индексации.


4.  Откройте в Notepad2 файл «application/config/database.php-distr». В нем необходимо указать 
	параметры вашей базы данных. После этого загрузите файл на сервер с именем «database.php».


5.  Откройте файл «application/maxsite/mso_config.php-distr». 
    
    В этом файле введите свою секретную фразу. Она используется при шифровании. Учтите, что 
    сменив эту фразу после инсталяции все пароли окажутся недействительными.
    
    После изменений загрузите файл на сервер с именем «mso_config.php».


6.  Запустите в браузере «http://ваш сайт/» и следуйте инструкциям.


7.  После установки системы, откройте файл «application/maxsite/mso_config.php» и измените на
    
        $mso_install = true; 

    Это укажет системе, что база установлена и не нужно это проверять каждый раз.
    Формально этот пункт можно пропустить.

	|  Примечание: во время установки MaxSite CMS попробует самостоятельно выставить 
	|  нужные права на некоторые файлы и каталоги. В случае ошибки, установщик MaxSite CMS
	|  предложит внести соответствующие изменения вручную.




ОБНОВЛЕНИЕ С ПРЕДЫДУЩИХ ВЕРСИЙ
----------------------------------------------------------------------------------------------------

Как правило, для обновления MaxSite CMS достаточно загрузить новые файлы поверх старых. Если 
в анонсе выпуска не указано особо, то используйте такой вариант обновления. 

Перед процедурой обновления желательно выполнить:

	* Сбросьте кэш.

	* Если у вас версия ниже 0.90, то перед обновлением убедитесь, что ваш шаблон будет корректно 
	  работать с новой версией MaxSite CMS.

	* MaxSite CMS не вносит изменений в базу данных при обновлении. Поэтому вы можете использовать
	  любую версию системы. Если по какой-то причине, обновление не устраивает, вы можете загрузить
	  файлы предыдущей версии.

	* Каталог «install» можно не копировать.
	
	* Если меняется адрес сайта, то предварительно снимите опцию определения главного зеркала сайта 
	  в плагине Range_url. 
	
	* Отключите плагин глобального кэширования (Global_cache).

	* Переключитесь на default шаблон админ-панели (Настройки — Основные — Админ-панель).
	
	* Нажмите ссылку «Выход» в админ-панели, чтобы разлогиниться.


Второй, универсальный способ обновления подходит для любой версии MaxSite CMS.

	1. Переименуйте каталоги 
		«system» в «system-old».
		«application» в «application-old».

	2. Загрузите файлы новой версии MaxSite CMS на сервер.
	
	3. Скопируйте старые файлы из «application-old» в новый «application»: 
		
		/config/database.php
		/maxsite/mso_config.php
	
	4. Скопируйте из «application-old» в новый «application» свой шаблон.
		/maxsite/templates/ШАБЛОН
		
	5. Если вы устанавливали сторонние плагины, то скопируйте и их.

	6. Проверьте работоспособность сайта.
	
	7. Каталоги «system-old» и «application-old» после можно удалить.




ДОПОЛНЕНИЯ
----------------------------------------------------------------------------------------------------

* PHP 5.5
	См. https://github.com/maxsite/cms/issues/45
	Проблема заключена в CodeIgniter, который пока не работает с этой версией PHP.


* Хостинги, работающие с MaxSite CMS - нюансы и проблемы: 
	http://forum.max-3000.com/viewtopic.php?f=2&t=136


* В браузере выдается ошибка "Cannot modify header information - headers..."
      
	Можно сказать, что вы неверно преобразовали файл в кодировку UTF-8. Нужно использовать 
	UTF-8 без сигнатуры (BOM). 


* При инсталяции при переходе ко второму шагу, выводится ошибка, что каталог не существует.
    
	Это означает, что у вас неверно настроен ЧПУ. Проверьте верный ли .htaccess.


* При инсталяции при переходе ко второму шагу, выводится ошибка «No input file specified».
    
	Это означает, что у вас неверно настроен ЧПУ. Проверьте верный ли у вас .htaccess. Возможно 
	ваш PHP работает как CGI. Используйте .htaccess-fastcgi.    


* На сайте «слетает» оформление и в title страниц виден <?= . 

	Это означает, что на вашем сервере запрещены короткие тэги PHP. В php.ini укажите
	
		short_open_tag = On
            
	либо обратитесь в службу поддержки вашего хостинга.


* Возникает ошибка 500
	
	Если сервер возвращает ошибку 500, значит запрещено выполнять какие-то директивы в .htaccess 
	или команда указана с ошибкой.


* Автоматический редирект с www.site.com на site.com

	Активируйте плагин Range_url, где можно указать главное зеркало сайта.



Если PHP как FastCGI, CGI
----------------------------------------------------------------------------------------------------
На некоторых хостингах (обычно старых), может потребоваться подобрать параметры .htaccess. Один 
из вариантов см. в файле .htaccess-fastcgi.

На некотрых серверах вместо строчки:

    RewriteRule . /index.php [L]

можно попробовать указать:

    RewriteRule ^(.*)$ /index.php?/$1 [L,QSA]

Кроме этого нужно подобрать в «application/config/config.php» значение "uri_protocol", например:

    $config['uri_protocol'] = "REQUEST_URI";

Вариант для Nginx с апачем в качестве надстройки

	RewriteRule ^(.*)$ /index.php?$1 [L,QSA]


# end of file